<div class="banner">
    <h1 class="bannerHeader">Profile</h1>
</div>
<br>

<div class="row">
    <div class="col-md-8">
        <div class="well profileWells">
            <div class="row">
                <div class="col-lg-6">
                    <h3>Board Theme</h3>
                </div>
                <div class="col-lg-6">
                    <h3>Piece Theme</h3>
                </div>
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-xs-3">
                            <!--Size dropdown content-->
                            <div id="default_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/default_board_theme.png" class="img-responsive">
                            </div>
                            <div id="chess24_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/chess24_board_theme.png" class="img-responsive">
                            </div>
                            <div id="metro_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/metro_board_theme.png" class="img-responsive">
                            </div>
                            <div id="leipzig_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/leipzig_board_theme.png" class="img-responsive">
                            </div>
                            <div id="wikipedia_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/wikipedia_board_theme.png" class="img-responsive">
                            </div>
                            <div id="dilena_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/dilena_board_theme.png" class="img-responsive">
                            </div>
                            <div id="uscf_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/uscf_board_theme.png" class="img-responsive">
                            </div>
                            <div id="symbol_board_theme" class="boardTheme2D_img">
                                <img src="../images/board_theme/symbol_board_theme.png" class="img-responsive">
                            </div>
                        </div>
                        <div class="col-xs-3 px-0 ">
                            <!--Size dropdown menu-->
                            <select id="boardTheme2D_option">
                                <option id="default_board_theme" value="default_board_theme">Default</option>
                                <option id="chess24_board_theme" value="chess24_board_theme">Chess24</option>
                                <option id="metro_board_theme" value="metro_board_theme">Metro</option>
                                <option id="leipzig_board_theme" value="leipzig_board_theme">Leipzig</option>
                                <option id="wikipedia_board_theme" value="wikipedia_board_theme">Wikipedia</option>
                                <option id="dilena_board_theme" value="dilena_board_theme">Dilena</option>
                                <option id="uscf_board_theme" value="uscf_board_theme">USCF</option>
                                <option id="symbol_board_theme" value="symbol_board_theme">Symbol</option>
                            </select>
                        </div>
                        <div class="col-xs-3 px-0 ">
                            <!--Size dropdown content-->
                            <div id="wikipedia_piece_theme" class="pieceTheme2D_img">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <img src="/images/piece_theme/wikipedia/bK.png" class="img-responsive">
                                        <img src="../images/piece_theme/wikipedia/bQ.png" class="img-responsive">
                                    </div>
                                    <div class="col-xs-6">
                                        <img src="/images/piece_theme/wikipedia/bP.png" class="img-responsive">
                                        <img src="/images/piece_theme/wikipedia/bB.png" class="img-responsive">
                                    </div>
                                </div>
                            </div>
                            <div id="modern_piece_theme" class="pieceTheme2D_img">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <img src="/images/piece_theme/modern/bK.png" class="img-responsive">
                                        <img src="/images/piece_theme/modern/bQ.png" class="img-responsive">
                                    </div>
                                    <div class="col-xs-6">
                                        <img src="/images/piece_theme/modern/bP.png" class="img-responsive">
                                        <img src="/images/piece_theme/modern/bB.png" class="img-responsive">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-3 px-0 ">
                            <!--Size dropdown menu-->
                            <select id="pieceTheme2D_option">
                                <option value="classic_piece_theme">Classic</option>
                                <option value="modern_piece_theme">Modern</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <br>
                <div class="col-lg-12">
                    <button type="submit" class="btn submit btn-primary pull-right" id="saveProfile">Save settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////-->
    <div class="col-md-4">
        <div class="well profileWells well-sm">
            <h3 class="text-center">Friends</h3>
            <div class="panel-group">

                <div class="topnav">
                    <div class="search-container">
                        <input type="text" placeholder="Search username" name="search">
                        <button class="btn btn-default" onclick="loadDoc()" type="submit">Search</button>
                    </div>
                </div>
                <br>
                <div class="well friendsSearchScroll">
                    <table class="table">
                        <tbody id="search-results">
                        </tbody>
                    </table>
                </div>
                <div class="well friendsScroll">
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="col-xs-3">Player</th>
                                <th class="col-xs-3"></th>
                                <th class="col-xs-3"></th>
                                <th class="col-xs-3"></th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each friends}}
                            <tr>
                                <td class="col-xs-3">{{userName}}</td>
                                <td class="col-xs-3"></td>
                                <td class="col-xs-3"><button type="button" class="btn btn-primary btn-xs pull-right" data-toggle="modal" data-target="#myModal">Create Game</button></td>
                                <td class="col-xs-3">
                                    <form action="/removeFriend" method="POST"><input type="hidden" name="id" value="{{id}}"/>
                                        <button type="submit" class="btn btn-danger btn-xs pull-right">Remove Friend</button>
                                    </form>
                                </td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        //hides dropdown content
        $(".boardTheme2D_img").hide();
        $(".pieceTheme2D_img").hide();
        //unhides first option content
        $("#default_board_theme").show();
        $("#wikipedia_piece_theme").show();

        //listen to dropdown for change
        $("#boardTheme2D_option").change(function () {
            //rehide content on change
            $('.boardTheme2D_img').hide();
            //unhides current item
            $('#' + $(this).val()).show();
        });
        $("#pieceTheme2D_option").change(function () {
            //rehide content on change
            $('.pieceTheme2D_img').hide();
            //unhides current item
            $('#' + $(this).val()).show();
        });
        //document.getElementById("uscf_board_theme").selected = true;
        //document.getElementById("{{pieceTheme2D}}").selected = true;
    });
</script>
<script>
    var loadDoc = function () {
        $.ajax({
            url: '/search',
            type: 'GET',
            data: { search: $('input')[0].value, },
            success: function (data) {
                let html = '';
                data.users.forEach(user => {
                    html += '<tr> \
                    <td>'+ user.userName + '<span class="dot"></span> </td>\
                    <td><form action="/addFriend" method="POST"><input type="hidden" name="id" value="'+ user.id + '">\
                    <button type="submit" class="btn btn-success btn-xs">Add Friend</button></form></td>\
                </tr>';
                });
                $('#search-results').html(html);
            },
            error: function () {
                console.log('error');
            }
        });
    };
    var socket = io();
    $('.create').each(function () {
        $(this).on('click', function (e) {
            var moveTimeLimit = $("#moveTimeLimit option:selected").val();
            var gameTimeLimit = $("#gameTimeLimit option:selected").val();
            socket.emit('createGame', { player1: currUser, player2: e.target.value, moveTimeLimit: moveTimeLimit, gameTimeLimit: gameTimeLimit });
        });
    });
    socket.on('newGame', function (data) {
        document.location.replace("/game/" + data.gameID);
    });
</script>